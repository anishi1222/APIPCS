# サービスの作成

サービスは、APIのサービス実装のエンドポイントを取得します。サービスを作成して、他のユーザーがAPIで作成したサービスを使用できるように、権限を管理します。サービスアカウントを関連付けることもできます。

## 始める前に

- 利用可能なAPI Platform Cloud Service環境を有している必要があります。API Platform Cloud Service環境の調達の詳細については、[環境](../../../../../environments/README.md)を参照してください。
- サービスエンドポイントを持っている必要があります。自分ですでに設定済みか、モックサービスを提供するチュートリアル[APIの設計](../../design/design_api)を完了することで用意できます。

## サービスを作成する

### API Platform Cloud Serviceにログイン

1. 選択した環境の説明に従って、ブラウザに管理ポータルのURLを指定します。

    > このURLは、選択した[環境](../../../../environments/README.md)に基づいていますが、形式は `http(s)://<host>:<port>/apiplatform`です。

1. *Service Manager*ロールを持つユーザーとしてログインします。

### 新しいサービスを作成する

1. *サービス*メニューが表示されていることを確認します。左上に*サービス*、右側に*作成*ボタンが表示されます。表示されていない場合は、左側のメニューボタンを選択し、*サービス*を選択します。
1. *作成*ボタンをクリックします。
1. TicketServiceImplなどの名前とサービスのバージョンを指定します。また、説明を入力することもできます。
1. サービスタイプを選択します。
   1. RESTサービスを定義する場合は、RESTを選択します。 RESTとHTTPの両方があることに気づくでしょうが、現時点では同じように動作します。
   1. SOAPサービスに接続する場合は、ダウンロードした **.wsdl** ファイルがあることを確認してください。SOAPサービスを選択すると、wsdlをアップロードしてサービスに適したポートタイプを選択できます。
1. エンドポイントを識別するためのエンドポイント名を設定します（オプション）。
1. 実際のサービス実装のURLを入力します。次の点に注意してください。
   1. リクエストを受信すると、API Platformは任意のリソースを受け入れ、それをサービスエンドポイントに追加してサービスを呼び出します。
   1. サービス*Endpoint URL*にリソースを追加すると、すべてのリクエストがそのリソースから開始されることに注意してください。この結果、API利用者がアクセスできるリソースが制限される可能性があります。

> 共有環境を使用している場合は、サービスが既に作成されている可能性があります。どのサービスがあなたのものであるかを知るために、あなたの名前の頭文字を追加するなどをして名前を変更してください。

サービスが作成されると、サービスのリストにそのサービスが表示されます。サービス名をクリックして編集を続行することができます。

#### アクセス権限を付与する（オプション）

作成者としての自分自身や管理者に対するサービスへのアクセスを制限したくない場合、他人へのアクセス権限を付与したいことがあります。

1. サービスをクリックした後、*ユーザー管理*のサイドタブを選択します。

    > あなたは既に*サービスの管理*権限を持っていることに気付いてらっしゃるかもしれません。

1. *サービスの参照*トップタブをクリックします。
1. *権限受領者の追加*ボタンをクリックします。
1. *API Managers*グループを選択し、*追加*をクリックします。

ここでは、任意の*API Manager*があなたのAPIのサービスを参照できるアクセス権を与えています。

ユーザーには、表示、参照、および管理する権限を与えることができます。

## 結論

このチュートリアルでは、次のことを学びました。

- API Platform Cloud Serviceでサービスを作成する方法
- サービスへのアクセスを許可する方法
  
## 次のステップ

- APIを作成するか、既に作成したAPIを選択して、*サービス・リクエスト*を更新してサービスを選択することができます。 APIの詳細については、[APIの作成](../../apis/create_api)を参照してください。

> APIを作成／更新するには、*API Manager*ロールが必要です。まだこれがない場合は、*API Manager*ロールを持つユーザーの認証情報にアクセスできることを確認してください。
