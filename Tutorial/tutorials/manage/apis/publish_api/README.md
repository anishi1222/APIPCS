# APIの公開

潜在的なAPI利用者が優れたAPIを発見できます。多種多様なアプリケーションを開発する開発者向けに、APIを開発者ポータルに公開するできます。開発者は開発者ポータルでAPIを検索してAPIについて知ります。API Managerは通常、他のユーザーがAPIを使用できるようになるとAPIを公開します。いくつかの例があります：

- 一般使用のために利用可能になっているAPI：これは通常、すべての作業が完了した本番稼動のAPIです。
- 特定開発者グループにのみリリースされるAPI：これは通常、本番稼動の準備ができていないAPIですが、特定開発者グループに開発中のAPIを試すことができるようアクセスを提供しています。

この演習では、次のことについて学習します。

- 開発者ポータルの完全なURLの設定
- 概要テキストの設定
- ドキュメントページの設定
- コンテンツのプレビュー
- 公開、再公開、および公開解除

## 始める前に

- 利用可能なAPI Platform Cloud Service環境を有している必要があります。API Platform Cloud Service環境の調達の詳細については、[環境](../../../../../environments/README.md)を参照してください。
- チュートリアル[APIポリシー実装の作成](../create_api)を完了している必要があります。
  - APIを作成したユーザーまたはAPIを管理するための適切な権限を持つユーザーの資格情報を持っている必要があります。権限をアクセスする必要がある場合は、[API権限](../grant_api)を参照してください。

## APIを公開する

APIを公開するには：

- APIを作成したユーザーまたはAPIを管理するための適切な権限を持つユーザーとして、API Platform Cloud Serviceの管理ポータルにログインします。
- 公開するAPIを選択します。
- *公開*のサイドタブをクリックします。

### APIポータルURL

- APIポータルURLを更新します。これは、APIの開発者ポータルページの*パーマリンク*として機能します。 URLは `<未公開>`で始まることに注意してください。このプレースホルダは実際の開発者ポータルの場所に更新されます。指定する値は、API開発者ポータルページのエンドポイントです。任意の値を使用できますが、APIの名前を使用することをお勧めします。

### 開発者ポータルAPIの概要

- マークダウンまたはHTMLの概要をファイル、URL、またはテキストを直接入力できます。概要を表示するには、小さなサンプルを入力してください。

### ドキュメンテーション

- *仕様*サイドタブでApiary仕様を選択した場合は、*API仕様書をドキュメントとして使用*を選択するだけでOKです。
  - *仕様*サイドタブで仕様を選択しなかったが、ここにリンクを貼り付けたい場合は、あなたのAPIがご自身が所属するApiaryチームで管理していれば、リンクを貼り付けることができます。
- *ドキュメントを個別に指定*にしたい場合は、開発者ポータルAPIの概要のやり方と同じく、ファイル、URL、またはテキストを直接入力できます。

> 注：*Apiary Free*プランを使用している場合は、API実装に仕様をリンクすることはできません。ただし、APIデザインを公開している場合は、ドキュメントを含めることができます。*Apiary Free*プランで作成されたAPIのドキュメントは、常に公開されているため、ドキュメントを参照して開発者ポータルに表示できます。
>
>ドキュメントを表示するには、ApiaryでAPIを選択し、*Documentation*トップ・タブをクリックします。 `https:// airport4.docs.apiary.io/#`のようなURLに注意してください。
>
> *ドキュメント*の中で*HTML*を選択し、*リンク*を選択して、あなたのApiaryデザインのドキュメンテーションのURLを入力してください。

#### コンセプトチェック

単にドキュメンテーションリンクを含めることができるのであれば、仕様をリンクするオプションがあるのはなぜでしょう？

> Apiaryチームの特徴は、チーム間でAPIを共同作業できることですが、その他の人と共有したくない場合があります。APIプラットフォームでApiaryデザインをリンクすると、API Platform Cloud Serviceの堅牢な権限付与システムを使用してドキュメントにアクセスできるユーザーを管理できるため、適切なユーザーだけがAPIの学習や登録できるように保証します。

### ポータルへの公開

変更を保存し、*ポータルに公開*をクリックします。

API Portal URLの横にある > を選択して、API開発者ポータルページを開くことができます。

ログインする必要があるかもしれませんが、その場合はAPI Managerの資格情報を使用してください。APIのBlueprintまたはドキュメンテーションが含まれているAPIのポータルページが表示されます。

#### 公開、再公開、および公開解除

APIの説明、概要テキスト、またはドキュメントの更新を含む、一般設定タブへの変更をするたびに、開発者ポータルに最新の変更をプッシュするために、再公開する必要があります。

注：API Platform Cloud Serviceは、開発者ポータルにおいてAPIの現在のイテレーションのみを保持します。保存すると、APIの更新（公開、再公開、および公開解除を含む）が直ちに有効になります。公開すると、直近に保存されたバージョンAPIの詳細が開発者ポータルにプッシュされます。

開発者ポータルからAPIの公開を解除することができます。公開解除された場合、アプリケーション開発者はAPIを発見してサブスクライブすることができなくなります。リクエストは、APIがゲートウェイから非アクティブ化またはアンデプロイされるまで、通常どおりゲートウェイによって処理されます。

## 結論

このチュートリアルでは、以下を学習しました。

- APIのドキュメントの提供
- ドキュメント用の他のHTMLソースへのリンク
- APIドキュメントをApiaryのAPI仕様へのリンク
- APIの開発者ポータルへの公開
