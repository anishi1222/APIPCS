# ゲートウェイノードのインストール

> このチュートリアルは作成中です

このチュートリアルでは、ゲートウェイインストーラをダウンロードし、インストール、ゲートウェイノードの構成方法を説明します。

## 始める前に

### 必須

- 利用可能なAPI Platform Cloud Service環境を有している必要があります。API Platform Cloud Service環境の調達の詳細については、[環境](../../../../../environments/README.md)を参照してください。
- 以下の資格を有するユーザーでアクセス出来る必要があります。
  - *Gateway Manager*および*Gateway Runtime*アプリケーション・ロールを持つユーザーのユーザー名とパスワード。これらは通常、ベストプラクティスとして別々のユーザーです。
  - `APICSAuto_ <domain>`アプリケーションの*Client ID*と*Client Secret*
- *Gateway Manager*および*Gateway Runtime*アプリケーション・ロールにユーザーを追加する必要がある場合は、../../users/entitle_users/README.mdに従って実施してください。
- ノードをインストールするために使用できるマシン（LinuxまたはWindows）またはIaaS VMがあります。

## インストールの準備

ゲートウェイのインストールと設定を開始する前に、以下を完了する必要があります。

- ゲートウェイ・インストーラをダウンロードします。
  - *Gateway Manager*のロールを持つユーザーとしてAPI Platform Cloud Serviceにログインします。
  - ゲートウェイに移動して、対象ゲートウェイを選択するか、存在しない場合はゲートウェイを作成します。
  - *ノード*サイドタブを選択し、*ゲートウェイ・インストーラのダウンロード*をクリックします。
- インストール・ウィザードを開いて、gateway-props.jsonファイルを作成します。
  - 設定を確認し、必要な属性を入力します。
    - 一部の設定は、インスタンスに基づいて事前に設定済みです。
    - インストール先のディレクトリなど、インストール先のマシンに基づいて選択する必要がある属性もあります。
      - 注：インストールする前にファイルを編集したり変更したりできます。
    - 一部の設定はオプションで、空白のままも可能です。
    - 作業が完了したら、インストーラを実行するためのコマンドをコピーし、設定ファイルをダウンロードできます。
    - [サンプルファイル](./sample_gateway-props.json)も提供されています。
- マシンにOracle Java Development Kit（JDK）8以降がインストールされていることを確認します。**OpenJDKはサポートされていません**。
- JAVA_HOME環境変数をJDKディレクトリに対して設定する必要があります。
- ゲートウェイ・インストーラに必要なディレクトリを作成し、そこにダウンロードしたインストーラを展開します。
- まだインストールされていない場合は、ノードのインストール先として指定したディレクトリを作成します。

## ノードのインストール

インストールを開始するには、ゲートウェイ構成ウィザードからコピーしたコマンドを入力します。

インストールの途中で、入力が求められます。
ゲートウェイのインストールと登録が完了したら、*Gateway Manager*のロールを持つユーザーとしてAPI Platform Cloud Serviceにログインします。

- ゲートウェイ -> あなたのゲートウェイ -> ノードに移動し、*リクエスト中*ステータスのノードを探します。
- ゲートウェイノードを承認します。

これでゲートウェイが利用できるようになりました！

## 次のステップ

OAuth2によって保護されているAPIを作成するための[OAuthの設定](../oauth/README.md)が可能です。
