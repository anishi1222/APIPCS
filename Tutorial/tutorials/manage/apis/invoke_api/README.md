# APIの呼び出し

APIは最終的に、*API利用者*や*アプリケーション開発者*によって、アプリケーションの中で使用されますが、APIを呼び出してテストすることができます。

まず、APIを呼び出す方法を特定する必要があります。これは、API仕様と、APIがデプロイされるエンドポイントまたはURLの組み合わせです。

## 始める前に

- 利用可能なAPI Platform Cloud Service環境を有している必要があります。API Platform Cloud Service環境の調達の詳細については、[環境](../../../../environments/README.md)を参照してください。
- [APIの設計](../../../design/design_api)の演習を完了していることが望ましいですが、必須ではありません。
- [APIポリシー実装の作成](../create_api)の演習を完了している必要があります。

## 使用するURLを識別

APIを呼び出すには、URLを識別する必要がありますが、これは、デプロイメントを表示することで識別できます。これは、ログインしているユーザーに応じてAPIレベルまたはゲートウェイレベルで確認できます。

### API Gateway Manager

ゲートウェイを管理するユーザとしてログインしている場合は、ゲートウェイの*デプロイメント*タブからURLを表示できます。

1. ゲートウェイを選択します。
2. あなたのゲートウェイを選択します。
3. *デプロイメント*サイド・タブをクリックします。
4. *デプロイ済*トップ・タブがハイライト表示されていることを確認します。
5. APIを見つけます。
6. *ロード・バランサURL*とその横にコピーアイコンがあることに注意してください。 コピーアイコンをクリックすると、URLをバッファにコピーできます。

### API Manager

APIを管理するユーザーとしてログインしている場合は、APIの[展開]タブからAPIのURLを表示できます

1. APIを選択します。
1. あなたのAPIを選択します。
1. *デプロイメント*サイド・タブをクリックします
1. *デプロイ済*トップ・タブがハイライト表示されていることを確認します。
1. ゲートウェイを見つけます（1つのAPIを複数のゲートウェイにデプロイできます）。
1. *ロード・バランサURL*とその横にコピーアイコンがあることに注意してください。 コピーアイコンをクリックすると、URLをバッファにコピーできます。

## API呼び出し方法の理解

APIのアドレス（URL）がわかったので、続いてどのように対話するかを知る必要があります。このために、Apiary（または他のドキュメント）のAPIデザインを使用できます。

> Apiaryを使用している場合は、モックサービスのエンドポイントが表示されます。前章で識別したゲートウェイのロードバランサ・アドレスを使用してください。

## APIの呼び出し

あなたの好きなRESTクライアントを選んでください。この演習では、単純なGETリクエストであるため、Webブラウザを使用することができます。

- 前の章節で取得した*ロード・バランサURL*とリソースに加えてURLを定義します。
  - 例：`http://<host>:<port>/ticketService/1/tickets`
- メソッド：APIデザインに従ってメソッド（例：GET）を設定します。
- ヘッダー（オプション）：
  - 仕様に従って、必要なヘッダーを設定します。さらに、このチュートリアルをチュートリアルの一部として完成した場合は、前述のチュートリアルの指針もあります。
- APIにリクエストを送信します。
